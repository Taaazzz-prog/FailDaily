<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/profile"></ion-back-button>
    </ion-buttons>
    <ion-title>Changer la photo</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="editor-container">
    <canvas id="avatarCanvas" width="300" height="300"></canvas>
  </div>

  <div class="controls">
    <ion-item>
      <ion-label>Zoom</ion-label>
      <ion-range min="1" max="3" step="0.05" value="1" (ionChange)="zoomChanged($event)"></ion-range>
    </ion-item>
    <div class="buttons-row">
      <ion-button fill="outline" (click)="rotateLeft()">
        <ion-icon name="repeat-outline" slot="start" style="transform: scaleX(-1);"></ion-icon>
        Pivoter G.
      </ion-button>
      <ion-button fill="outline" (click)="rotateRight()">
        <ion-icon name="repeat-outline" slot="start"></ion-icon>
        Pivoter D.
      </ion-button>
      <ion-button fill="outline" (click)="resetEditor()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Reset
      </ion-button>
    </div>
  </div>

  <div class="sources">
    <h3>Sources</h3>
    <div class="buttons-row">
      <ion-button (click)="chooseFromCamera()">
        <ion-icon name="camera-outline" slot="start"></ion-icon>
        Caméra
      </ion-button>
      <ion-button (click)="chooseFromGallery()">
        <ion-icon name="images-outline" slot="start"></ion-icon>
        Galerie
      </ion-button>
      <ion-button (click)="importFromFile()">
        <ion-icon name="images-outline" slot="start"></ion-icon>
        Fichier
      </ion-button>
    </div>

    <h4>Avatars par défaut</h4>
    <ion-grid class="defaults-grid">
      <ion-row>
        @for (av of defaultAvatars; track av) {
          <ion-col size="3">
            <img [src]="av" alt="avatar" class="default-avatar" (click)="onDefaultAvatarClick(av)" />
          </ion-col>
        }
      </ion-row>
    </ion-grid>
  </div>

  <div class="footer-actions">
    <ion-button color="medium" fill="outline" (click)="cancel()">
      <ion-icon name="close-outline" slot="start"></ion-icon>
      Annuler
    </ion-button>
    <ion-button color="primary" (click)="save()">
      <ion-icon name="save-outline" slot="start"></ion-icon>
      Enregistrer
    </ion-button>
  </div>
</ion-content>

