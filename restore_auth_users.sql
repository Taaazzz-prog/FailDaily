-- =====================================================
-- RESTAURATION DES UTILISATEURS AUTH.USERS
-- Mot de passe pour tous: 51008473
-- =====================================================

-- Hash du mot de passe 51008473 avec bcrypt
-- Le hash est: $2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa

INSERT INTO auth.users (
    instance_id, 
    id, 
    aud, 
    role, 
    email, 
    encrypted_password, 
    email_confirmed_at, 
    invited_at, 
    confirmation_token, 
    confirmation_sent_at, 
    recovery_token, 
    recovery_sent_at, 
    email_change_token_new, 
    email_change, 
    email_change_sent_at, 
    last_sign_in_at, 
    raw_app_meta_data, 
    raw_user_meta_data, 
    is_super_admin, 
    created_at, 
    updated_at, 
    phone, 
    phone_confirmed_at, 
    phone_change, 
    phone_change_token, 
    phone_change_sent_at, 
    email_change_token_current, 
    email_change_confirm_status, 
    banned_until, 
    reauthentication_token, 
    reauthentication_sent_at, 
    is_sso_user, 
    deleted_at
) VALUES 
-- Utilisateur 1: test@test.fr
('00000000-0000-0000-0000-000000000000'::uuid, 
 'b64524ba-9daa-4fe7-8372-a9e94402ab83'::uuid, 
 'authenticated', 
 'authenticated', 
 'test@test.fr', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-09 06:34:38.403211+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL),

-- Utilisateur 2: bruno@taazzz.be
('00000000-0000-0000-0000-000000000000'::uuid, 
 'a36deb63-dd4e-4828-adcf-0b6e457c25f2'::uuid, 
 'authenticated', 
 'authenticated', 
 'bruno@taazzz.be', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-09 17:56:38.659255+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL),

-- Utilisateur 3: bruno@taeee.be
('00000000-0000-0000-0000-000000000000'::uuid, 
 '60232dad-d6a0-43a6-baa2-f525133e4261'::uuid, 
 'authenticated', 
 'authenticated', 
 'bruno@taeee.be', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-10 06:48:01.542247+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL),

-- Utilisateur 4: allah@hackbar.is
('00000000-0000-0000-0000-000000000000'::uuid, 
 'ec47b667-71ae-4d54-a414-f8e7f755226b'::uuid, 
 'authenticated', 
 'authenticated', 
 'allah@hackbar.is', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-10 07:55:27.790861+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL),

-- Utilisateur 5: popop@popop.fr
('00000000-0000-0000-0000-000000000000'::uuid, 
 '48bf8bb4-3f62-485e-a13f-7956b2ad4e61'::uuid, 
 'authenticated', 
 'authenticated', 
 'popop@popop.fr', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-10 08:03:41.074040+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL),

-- Utilisateur 6: all@all.fr
('00000000-0000-0000-0000-000000000000'::uuid, 
 'e7b10aa5-fb69-45f9-8438-f0ead77b5f44'::uuid, 
 'authenticated', 
 'authenticated', 
 'all@all.fr', 
 '$2a$06$YCjSrm0CYnEXUjH5zXTyau2ntt82cK0o33z3vVcA3FAe7kHroT1Wa', 
 NOW(), 
 NULL, 
 '', 
 NULL, 
 '', 
 NULL, 
 '', 
 '', 
 NULL, 
 NOW(), 
 '{"provider": "email", "providers": ["email"]}', 
 '{}', 
 FALSE, 
 '2025-08-10 08:19:18.080075+00'::timestamptz, 
 NOW(), 
 NULL, 
 NULL, 
 '', 
 '', 
 NULL, 
 '', 
 0, 
 NULL, 
 '', 
 NULL, 
 FALSE, 
 NULL);

-- =====================================================
-- MISE À JOUR DES IDENTITIES
-- =====================================================

INSERT INTO auth.identities (
    provider_id,
    user_id,
    identity_data,
    provider,
    last_sign_in_at,
    created_at,
    updated_at,
    id
) VALUES 
-- Identity pour test@test.fr
('b64524ba-9daa-4fe7-8372-a9e94402ab83', 
 'b64524ba-9daa-4fe7-8372-a9e94402ab83'::uuid,
 '{"sub": "b64524ba-9daa-4fe7-8372-a9e94402ab83", "email": "test@test.fr", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-09 06:34:38.403211+00'::timestamptz,
 NOW(),
 gen_random_uuid()),

-- Identity pour bruno@taazzz.be
('a36deb63-dd4e-4828-adcf-0b6e457c25f2', 
 'a36deb63-dd4e-4828-adcf-0b6e457c25f2'::uuid,
 '{"sub": "a36deb63-dd4e-4828-adcf-0b6e457c25f2", "email": "bruno@taazzz.be", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-09 17:56:38.659255+00'::timestamptz,
 NOW(),
 gen_random_uuid()),

-- Identity pour bruno@taeee.be
('60232dad-d6a0-43a6-baa2-f525133e4261', 
 '60232dad-d6a0-43a6-baa2-f525133e4261'::uuid,
 '{"sub": "60232dad-d6a0-43a6-baa2-f525133e4261", "email": "bruno@taeee.be", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-10 06:48:01.542247+00'::timestamptz,
 NOW(),
 gen_random_uuid()),

-- Identity pour allah@hackbar.is
('ec47b667-71ae-4d54-a414-f8e7f755226b', 
 'ec47b667-71ae-4d54-a414-f8e7f755226b'::uuid,
 '{"sub": "ec47b667-71ae-4d54-a414-f8e7f755226b", "email": "allah@hackbar.is", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-10 07:55:27.790861+00'::timestamptz,
 NOW(),
 gen_random_uuid()),

-- Identity pour popop@popop.fr
('48bf8bb4-3f62-485e-a13f-7956b2ad4e61', 
 '48bf8bb4-3f62-485e-a13f-7956b2ad4e61'::uuid,
 '{"sub": "48bf8bb4-3f62-485e-a13f-7956b2ad4e61", "email": "popop@popop.fr", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-10 08:03:41.074040+00'::timestamptz,
 NOW(),
 gen_random_uuid()),

-- Identity pour all@all.fr
('e7b10aa5-fb69-45f9-8438-f0ead77b5f44', 
 'e7b10aa5-fb69-45f9-8438-f0ead77b5f44'::uuid,
 '{"sub": "e7b10aa5-fb69-45f9-8438-f0ead77b5f44", "email": "all@all.fr", "email_verified": true, "phone_verified": false}'::jsonb,
 'email',
 NOW(),
 '2025-08-10 08:19:18.080075+00'::timestamptz,
 NOW(),
 gen_random_uuid());

-- =====================================================
-- VÉRIFICATION
-- =====================================================
SELECT 'Utilisateurs créés:' as status;
SELECT id, email FROM auth.users ORDER BY email;

SELECT 'Identities créées:' as status;
SELECT user_id, provider FROM auth.identities ORDER BY provider;
